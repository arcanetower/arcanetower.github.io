<!DOCTYPE html>
<html style="height: 100%; margin: 0;">
  <head>
    <title>Eliv Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="scripts/leaflet/leaflet.css">
    <script src="scripts/leaflet/leaflet.js"></script>
    <script type="text/javascript" src="scripts/leaflet-hash-master/leaflet-hash.js"></script>
    <script src="scripts/leaflet.measure-master/leaflet.measure.js"></script>
    <link rel="stylesheet" href="scripts/sidebar-v2-master/css/leaflet-sidebar.css">
  </head>
  <body style="height: 100%; margin: 0;">
    <div id="sidebar" class="sidebar collapsed">
        <!-- Nav tabs -->
        <div class="sidebar-tabs">
            <ul role="tablist">
                <li><a href="#home" role="tab"><i class="fa fa-bars"></i></a></li>
                <li><a href="#travel" role="tab"><i class="fa fa-map-marker"></i></a></li>
            </ul>
        </div>

        <!-- Tab panes -->
        <div class="sidebar-content">
            <div class="sidebar-pane" id="home">
                <h1 class="sidebar-header">
                    World Map
                    <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
                <p>Welcome to the world of <u>Eliv</u> an ever expanding and wonderous world full of creatures and places worth exploring.</p>

                <p>The world is currently centered on the main location of the campaign. The Tower of the Arcane Arts. This is home to many a magic user where they spend their time helping those in the surrounding area as well as expanding their current arcane understanding.</p>

                <p>In order to navigate the map there are a couple of things that you need to be aware of. Firstly you can pan around using the mouse or your finger (if on a mobile device) to view different parts of the map. Secondly you can also zoom in or out by using the scroll wheel, buttons in the top right of the map, or pinching with your fingers (if on a mobile device). If you select one of the icons on display it will show you more information about the town or location that you have chosen. To close the marker simply click outside of the marker and it will dissapear. The icons will dissapear if you zoom out to far and will reappear once you zoom in close enough. Next to the zoom controls are two other buttons. The first is the measure button, and the seoncd being the layer button.</p>

                <p><b>Layer Controls</b></p>
                <p> The layer controls button allows you to turn off or on various overlays. The top three options allow you to see the boundries between the states as well as the nations, selecting either one will show the area of land that each nation owns. By selecting 'None' it will remove all selections. If you need to remove the icons displayed on the screen for any reason you can do so by selecting the check box next to 'icons' in the Layer Controls box

                <p><b>Measuring</b></p>
                <p>The measure button allows you to see the distance between points that you place on the map. This is helpful for calculating the travel time between locations. It is important that you turn off the icons before measuring as otherwise you won't be able to click directly on the city. Once the icons are turned of simply click on the start of your journey and continue clicking in different locations, it will show you in miles how far between the two points, as you add more points it will continue to show you the distance to the individual points from the origin. You can also activate the measure tool by pressin 'm' on your keyboard. To exit the measrurement that you had completed just press escape on your keyboard or press the measure button again. To bring back the icons simply zoom in or out to an appropriate level or turn them on in the layer controls.</p>
            </div>

            <div class="sidebar-pane" id="travel">
              <h1 class="sidebar-header">Travel times<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
              <p>Wondering how long it will take you to get from one location to the next, simple use the measure tool (or press 'm' on your keyboard) to find out the total amount of miles. The tooltip will then show you the distance and how long it will take to get there depending on the speed that you are travelling. You are only able to go as fast as the slowest member of your party.</p>
              <p><b>Fast:</b></p>
              <p>While travelling at a fast pace you have a -5 penalty to passive Wisdom (Perception) scores. You are able to travel 4 miles an hour or 30 miles a day (assuming 8 hours of travel time a day).</p>
              <p><b>Normal:</b></p>
              <p> While travelling at a normal pace you are able to travel 3 miles an hour or 24 miles a day (assuming 8 hours of travel time a day).</p>
              <p><b>Slow:</b></<p>
              <p> While travelling at a slow pace you are able to use Stealth. You are able to travel 2 miles an hour or 18 miles a day (assuming 8 hours of travel time a day).</p>
              <p><b>Forced March:</b></<p>
              <p>The Travel Pace table assumes that characters Travel for 8 hours in day. They can push on beyond that limit, at the risk of Exhaustion. For each additional hour of Travel beyond 8 hours, the characters cover the distance shown in the Hour column for their pace, and each character must make a Constitution saving throw at the end of the hour. The DC is 10 + 1 for each hour past 8 hours. On a failed saving throw, a character suffers one level of Exhaustion.</p>
            </div>
        </div>
    </div>
    <div id="map" style="width: 100%; height: 100%; background: #888888; margin: 0; class="sidebar-map""></div>
    <script type ="text/javascript" src="scripts/sidebar-v2-master/js/leaflet-sidebar.js"></script>
    <script type="text/javascript">
      var mapSW = [0, 16384],
          mapNE = [16384, 0];

      var map = L.map('map').setView([-11.346192, -83.034668], 6);

        L.tileLayer('maps/world_5/{z}/{x}/{y}.png', {
          minZoom: 0,
          maxZoom: 6,
          noWrap: true,
          zoomControl: false,
        }).addTo(map);

        L.control.zoom({
          position:'topright',
        }).addTo(map);

        map.setMaxBounds(new L.LatLngBounds(
          map.unproject(mapSW, map.getMaxZoom()),
          map.unproject(mapNE, map.getMaxZoom())
        ));

    //Load measure plugin and set options
    var plugin = L.control.measure({
      keyboard: true,
      activeKeyCode: 'M'.charCodeAt(0),
      cancelKeyCode: 27,
      lineColor: 'red',
      lineWeight: 2,
      lineDashArray: '6, 6',
      lineOpacity: 1,
      formatDistance: function (val) {
        return Math.ceil(Math.round(1000 * val / 1609.344) / 6500) + 'mi ' + 'F:' + Math.round((Math.round(1000 * val / 1609.344) / 6500)/30*10)/10 + 'days ' +'N:' + Math.round((Math.round(1000 * val / 1609.344) / 6500)/24*10)/10 + 'days ' + 'S:' + Math.round((Math.round(1000 * val / 1609.344) / 6500)/18*10)/10 + 'days ';
      },
      position: 'topright',
    }).addTo(map);

    //Load the script to allow the map view to be controlled via url
    var hash = new L.Hash(map);

    var sidebar = L.control.sidebar('sidebar').addTo(map);

    //Icons
    var tower = L.icon({
      iconUrl: 'images/markers/tower.png',
      iconSize: [30, 41],
      iconAnchor: [15, 41],
      popupAnchor: [0, -30],
      shadowUrl: 'images/markers/tower_shadow.png',
      shadowSize: [23.6, 41],
      shadowAnchor: [5, 38]
    });

    var port_town = L.icon({
      iconUrl: 'images/markers/port_town.png',
      iconSize: [25, 22.9],
      iconAnchor: [8, 14],
      popupAnchor: [5 , -5],
      shadowUrl: 'images/markers/port_town_shadow.png',
      shadowSize: [25, 22.9],
      shadowAnchor: [6, 14]
    });

    var town = L.icon({
      iconUrl: 'images/markers/town.png',
      iconSize: [25, 22.9],
      iconAnchor: [8, 14],
      popupAnchor: [5, -5],
      shadowUrl: 'images/markers/town_shadow.png',
      shadowSize: [25, 22.9],
      shadowAnchor: [6, 14]
    });

    var port_city = L.icon({
      iconUrl: 'images/markers/port_city.png',
      iconSize: [25, 22.9],
      iconAnchor: [8, 14],
      popupAnchor: [5, -5],
      shadowUrl: 'images/markers/port_city_shadow.png',
      shadowSize: [25, 22.9],
      shadowAnchor: [6, 14]
    });

    var city = L.icon({
      iconUrl: 'images/markers/city.png',
      iconSize: [25, 22.9],
      iconAnchor: [8, 14],
      popupAnchor: [5, -5],
      shadowUrl: 'images/markers/city_shadow.png',
      shadowSize: [25, 22.9],
      shadowAnchor: [6, 14]
    });
    //Nation Polygons
    var prusha_nation_lines = [[-7.561019, -103.557129],[-9.277135, -102.98584],[-10.272639, -101.645508],[-11.458789, -99.470215],[-12.125193, -95.976563],[-12.704259, -91.582031],[-12.06079, -89.758301],[-16.322681, -86.879883],[-16.301581, -82.683105],[-15.264914, -78.837891],[-14.009886, -77.937012],[-14.073873, -75.432129],[-12.962308, -74.025879],[-9.620999, -73.586426],[-8.078647, -74.729004],[-7.991567, -75.52002],[-8.426775, -76.662598],[-6.115192, -81.166992],[-6.857915, -85.166016],[-7.539249, -88.242187],[-5.575834, -90.98877],[-5.575834, -90.98877],[-4.788494, -93.867188],[-5.794359, -95.339355],[-6.252982, -96.37207],[-6.383944, -98.591309],[-6.580325, -100.612793],[-6.863848, -102.106934]]

    // State Polygons
    var shah_state_lines = [[-12.06079, -89.758301],[-16.322681, -86.879883],[-16.301581, -82.683105],[-15.264914, -78.837891],[-14.009886, -77.937012],[-12.576354, -78.09082],[-11.802719, -78.134766],[-11.177916, -78.354492],[-10.638206, -78.134766],[-9.7727, -77.980957],[-9.295697, -77.453613],[-8.883215, -77.036133],[-8.426775, -76.662598],[-6.814257, -79.628906],[-6.115192, -81.166992],[-6.857915, -85.166016],[-7.539249, -88.242187],[-11.458789, -88.220215]];

    var bertol_state_lines = [[-7.991567, -75.52002],[-8.078647, -74.729004],[-9.620999, -73.586426],[-12.962308, -74.025879],[-14.073873, -75.432129],[-14.009886, -77.937012],[-12.576354, -78.09082],[-11.802719, -78.134766],[-11.177916, -78.354492],[-10.638206, -78.134766],[-9.7727, -77.980957],[-9.295697, -77.453613],[-8.883215, -77.036133],[-8.426775, -76.662598]];

    var merback_state_lines = [[-11.458789, -88.220215],[-12.06079, -89.758301],[-12.704259, -91.582031],[-12.125193, -95.976563],[-11.458789, -99.470215],[-10.272639, -101.645508],[-9.277135, -102.98584],[-7.561019, -103.557129],[-6.863848, -102.106934],[-6.580325, -100.612793],[-6.383944, -98.591309],[-6.252982, -96.37207],[-5.794359, -95.339355],[-4.788494, -93.867188],[-5.575834, -90.98877],[-5.575834, -90.98877],[-7.539249, -88.242187]]

    var iron_state_lines = [[-9.620999, -73.586426],[-12.962308, -74.025879],[-14.008696, -72.930122],[-13.774066, -71.590139],[-13.068777, -70.030487],[-12.168226, -68.558703],[-11.113727, -67.701993],[-10.509417, -67.240687],[-8.885072, -68.339034],[-7.100893, -71.062933]]

    var shah_state = L.polygon(shah_state_lines, {color: 'red'});

    var bertol_state = L.polygon(bertol_state_lines, {color: 'red'});

    var merback_state = L.polygon(merback_state_lines, {color: 'red'});

    var iron_state = L.polygon(iron_state_lines, {color: 'grey'});

    var prusha_nation = L.polygon(prusha_nation_lines, {color: 'red'});

    //blank image
    var blank_image = 'images/none.png',
      blank_bounds = [[84,-172], [85, -173]];
    var blank_icon = L.imageOverlay(blank_image, blank_bounds);

    //State Names as image layers
    var prusha_image = 'images/names/prusha.png',
      prusha_bounds = [[-14.946524, -86.813965], [-16.278474, -82.946777]];
    var prusha_name = L.imageOverlay(prusha_image, prusha_bounds);

    var shah_image = 'images/names/shah.png',
      shah_bounds = [[-9.4715, -86.220113], [-11.027765, -80.289043]];
    var shah_name = L.imageOverlay(shah_image, shah_bounds);

    var bertol_image = 'images/names/bertol.png',
      bertol_bounds = [[-9.298124, -77.191706],[-10.164115, -73.984534]]
    var bertol_name = L.imageOverlay(bertol_image, bertol_bounds);

    var merback_image = 'images/names/merback.png',
      merback_bounds = [[-11.070883, -94.809182],[-12.06079, -90.525631]]
    var merback_name = L.imageOverlay(merback_image, merback_bounds);

    var iron_state_image = 'images/names/iron_state.png',
      iron_state_bounds = [[-12.661778, -73.633063],[-13.218556, -70.909164]]
    var iron_state_name = L.imageOverlay(iron_state_image, iron_state_bounds);

    // Markers Shah Provence
      var marker_arcane = L.marker([-14.455958, -83.71582], {icon: tower})
        marker_arcane.bindPopup('<img src="images/arcane_tower.jpg" width="300" height="200"><br><h1 style="color:red;font-size:20px;">The Tower of the Arcane Arts</h1><p>The Tower of the Arcane Arts is a bastion for all those seeking to develop their magical abilities. Those who pass the Trial of the Four Pillars are allowed access to the wonders inside.<p>');

      var marker_veritas = L.marker([-14.645909, -83.452148], {icon: port_town})
        marker_veritas.bindPopup('<img src="images/veritas.jpg" width="300" height="200"><br><h1 style="color:red;font-size:20px;">Veritas</h1><p>Veritas is a port city that is located at the base of a large hill. Sitting within the shadow of the tower that holds the Council of the Arcane Arts, Veritas is a bustling town with a number of buildings and people living within. It has a main road which leads from the port up towards the northern gate. Because it is a port town there are numerous people of varying races residing within. It has a population of about 9,000 people and while there are varying races most are either human or halfling. Exiting out of the town the road curves up and around the hill towards the north then west to an intersection, where travelling south up the hill leads to the tower of the Arcane Arts while travelling north leads to Wingston.<p><br><a href="veritas.html">Town Map</a>');

      var marker_wingston = L.marker([-13.304877, -83.847656], {icon: town})
        marker_wingston.bindPopup('<img src="images/wingston.jpg" width="300" height="200"><br><h1 style="color:red; font-size:20px;">Wingston</h1><p>Wingston is a typical farming village with its sprawled out design and farmsteads Each building is only of a single storey in height save for The Barn located in the centre of the town. Several hours from the town is an apple orchard which is home to about 40 people who help maintain it.<p><br><a href="wingston.html">Town Map</a>')

      var marker_lancaster = L.marker([-12.275444, -85.583496], {icon: town})
          marker_lancaster.bindPopup('<img src="images/lancaster.jpg" width="300" height="200"><br><h1 style="color:red; font-size:20px;">Lancaster</h1><p>Lancaster was once known for its flowers growing and selling many of their wares to the surrounding towns. The flowers were mostly sold for decorations to nobles but also for medical purposes as well as dyes. This, however, came to an end when the town was attacked by bandits and many of its residents were killed save for a handful. This handful was rescued by the tower all being women and children, all who currently reside in Polperro. However reconstruction has started on the town.<p><br><a href="lancaster.html">Town Map</a>')

      var marker_polperro = L.marker([-11.285739, -86.748047], {icon: town})
          marker_polperro.bindPopup('<img src="images/polperro.jpg" width="300" height="200"><br><h1 style="color:red; font-size:20px;">Polperro</h1><p>Polperro has a reputation among the countryside and is known for having tough warriors, the best warriors for the Prusha Empire come from here. It is governed by a group of guild masters rather than a mayor. However, the general of the armies of Polperro has more weight in discussions and while not officially the mayor acts like one. The thick palisade walls stretch up 40-50 feet into the sky, the sharp-pointed wooden spikes have soldiers constantly patrolling.<p><br><a href="polperro.html">Town Map</a>')

      var marker_berxley = L.marker([-11.931814, -81.650391], {icon: town})
          marker_berxley.bindPopup('<img src="images/berxley.jpg" width="300" height="200"><br><h1 style="color:red; font-size:20px;">Berxley</h1><p>Polperro has a reputation among the countryside and is known for having tough warriors, the best warriors for the Prusha Empire come from here. It is governed by a group of guild masters rather than a mayor. However, the general of the armies of Polperro has more weight in discussions and while not officially the mayor acts like one. The thick palisade walls stretch up 40-50 feet into the sky, the sharp-pointed wooden spikes have soldiers constantly patrolling.<p><br><a href="berxley.html">Town Map</a>')

      var marker_bereston = L.marker([-10.142962, -88.791504], {icon: town})
          marker_bereston.bindPopup('<img src="images/bereston.jpeg" width="300" height="200"><br><h1 style="color:red; font-size:20px;">Bereston</h1><p>Bereston is a small village build on stilts in the Bereston marsh. There are four small clusters of houses connected by scaffoldings. Tied to the poles of the scaffolding are little boats they use for fishing close to the city.<p><br><a href="bereston.html">Town Map</a>')

      var marker_hammerton = L.marker([-8.535501, -85.649414], {icon: city})
          marker_hammerton.bindPopup('<img src="images/hammerton.jpg" width="300" height="200"><br><h1 style="color:red; font-size:20px;">Hammerton</h1><p>Hammerton is built into a small valley in the mountains that runs North-South. It is narrow so Hammerton is sometimes called the One Street Town. There is farmland build into the mountainside, but for the most part, it is a rest station for those travelling through the mountains to pass to the north side. Hammerton serves two functions. One an export of ore from the nearby mountain mines. Two it is a gateway rest to the mountain range for those wishing to travel over the mountains to the northern desert.<p><br><a href="hammerton.html">Town Map</a>')

      var marker_watford = L.marker([-14.326975, -86.000977], {icon: port_city})
          marker_watford.bindPopup('<img src="images/watford.jpeg" width="300" height="200" style="vertical-align:middle"><br><h1 style="color:red; font-size:20px;">Watford</h1><p>The city of Watford was built along the banks of a labyrinth of rivers and is truly an ancient metropolis. Its elegance is matched by the backdrop of lush forests which have helped shape the city to what it is today. The climate these forests brought was of great importance, but they were also influential when it came to architectural designs as the vast majority of buildings have been built with many natural elements to keep in line with the forests. The skyline is packed with soaring skyscrapers and their history seemed to shine more now than ever. Trade is at an all-time high in Watford and it has attracted a lot of attention. Many new cultures have left their mark not just on trade and relations, but also upon the citys identity. What historically was a city of predictability has grown into a fusion of everything and it is this that unites the people to this day. It is this multicultural identity that has truly left its mark. Hundreds of Diners, Taverns, Tea Shops, and Inns offer a plethora of culinary choices for those who feel hungry. There is something for everyone to enjoy nature, libraries, or one of the many recreational venues.<p><br><a href="watford.html">Town Map</a>', {
        maxWidth: 450
      })

      //Markers Bertol
      var marker_vex = L.marker([-10.162469, -77.651367], {icon: town})
          marker_vex.bindPopup('<img src="images/vex.jpg" width="300" height="200"><br><h1 style="color:red; font-size:20px;">Vex</h1><p>Vex is a farming town with a military outpost near by. Being on the boarder of Shah and Bertrol states it manages much of the trade and boarder control. Vexs main production is oranges. They have many orchards growing around the outside and export a lot of what they grow.<p><br><a href="vex.html">Town Map</a>')

        var marker_gladmouth = L.marker([-10.530148, -75.915527], {icon: town})
            marker_gladmouth.bindPopup('<img src="images/gladmouth.jpg" width="300" height="200"><br><h1 style="color:red; font-size:20px;">Gladmouth</h1><p>Gladmouth is known for its fashion and the nobility that live there. It is the place to be if you are wealthy and well off. Many nobles who choose to live here do so because of the abundance of land around the area and its local to the capital Gora. There are two sides to every coin though and there are rougher parts of the town which the nobility steer clear of calling it The Dark Half.<p><br><a href="vex.html">Town Map</a>')

        var marker_gora = L.marker([-12.532818, -75.410156], {icon: city})
            marker_gora.bindPopup('<img src="images/gora.png" width="300" height="200"><br><h1 style="color:red; font-size:20px;">Gora</h1><p>Gora is the Capital of the Prushan Empire, the city itself is massive and the largest in Prusha. It is known for having immaculatily clean streets and a variety of stores and places to entertain oneself. The town tends to be home to much nobility wanting to be close to the King and his family. the city is built on a hill with the central castle being the main object of display. All roads lead towards the castle and the buildings surrounding the inner walls. A lot of time and effort has been spent of keeping the city looking as beautiful as possible.<p><br><a href="gora.html">Town Map</a>')

      //Merback Markers
      var marker_bearcall = L.marker([-9.837694, -91.274414], {icon: port_city})
          marker_bearcall.bindPopup('<img src="images/bearcall.jpeg" width="300" height="200"><br><h1 style="color:red; font-size:20px;">Bearcall</h1><p>Bearcall is a settlement that formed around The Pillars of the Stor. It lies close to the coast in the state of Merback. The city itself is home to many races with each person who grew up within its bounds being broader and stockier than others. People who grow up here are easily able to lift heavy barrels and move them about without the use of a cart. there are many soldiers about who do not wear uniforms. It houses a population of well over 100,000 individuals.<p><br><a href="bearcall.html">Town Map</a>')

      //The Iron State markers
      var marker_birch = L.marker([-10.681419, -72.290039], {icon: city})
          marker_birch.bindPopup('<img src="images/birch.jpg" width="300" height="200"><br><h1 style="color:grey; font-size:20px;">Birch</h1><p>Birch is hillside town that has a well defendable location on the top of a hill. It is known for having anotable smithing academy and its residents enjoy wearing fashonable clothing. Much of which they import from Gladmouth. Due to being in the Iron State the city is well prepared for war if the need would arise. With all its guards having iron armor and weapons as well as balista and other weapons on the walls of the city. The town is mostly dwarves with a few other races being found inside of the walls. <p><br><a href="birch.html">Town Map</a>')

      //Moveable Marker
      var marker  = L.marker([-11.994986, -83.95752], {
        draggable: true,
      })
        marker.bindPopup('');

      marker.on('dragend', function(e) {
        marker.getPopup().setContent('Clicked' + marker.getLatLng().toString()).openOn(map);
      });

    //Layer Groups
      var lg_towns = L.layerGroup([marker, marker_arcane, marker_veritas, marker_wingston, marker_watford, marker_lancaster, marker_polperro, marker_berxley, marker_bereston, marker_hammerton,marker_vex,marker_gladmouth,marker_gora,marker_birch,marker_bearcall]);

      var lg_states = L.layerGroup([shah_state,shah_name,bertol_state,bertol_name,merback_state,merback_name,iron_state,iron_state_name]);

      var lg_nations = L.layerGroup([prusha_nation,prusha_name,iron_state,iron_state_name]);

      var lg_none = L.layerGroup([blank_icon]);

      var baselays = {
        "None": lg_none,
        "States": lg_states,
        "Nations": lg_nations,
      };

      var overlays = {
        "Icons": lg_towns,
      };

      map.on('zoomend', function(e) {
        var geo = map.getCenter();
        console.log(map.getZoom());
        if (map.getZoom()>=5)
        {
          lg_towns.addTo(map);
        }else {
          lg_towns.remove();
        }
      });
    // Add Layer Control
      L.control.layers(baselays, overlays).addTo(map);
    </script>

  </body>
</html>
